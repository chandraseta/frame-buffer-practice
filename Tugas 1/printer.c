#include "printer.h"

#include <string.h>

void initializeDictionary() {
    int i;
    for(i = 0; i<256; i++){
        cdict[i] = (char*)malloc(100);
    }
    cdict['a'] = "000010000000111000001111000001101100001101100001000100011000110011111110011000110110000111110000011";
    cdict['b'] = "001111000011111100111001100011000100011001100011011100011001100011000110011000110011001110011111100";
    cdict['c'] = "000111100001000110010000100010000000010000000010000000011000000011000000001100000000111110000111100";
    cdict['d'] = "011111000111001100011000110011000110011000110011000110011000110011000110011000110011001100011111000";
    cdict['e'] = "000111100001000110010000000110000000111111100110000000110000000110000000011000000001111100000111000";
    cdict['f'] = "111111111111111110011000000011000000011000000111111100011000000011000000011000000011000000010000000";
    cdict['g'] = "000111110001000011010000000110000000110000000110001110110000111110000011011000111001111110000111100";
    cdict['h'] = "011000110111001110011000110011000110111111110011000110011000110011000110011000110011000110010000100";
    cdict['i'] = "000011000000011000000011000000011000000011000000011000000011000000011000000011000000011000000010000";
    cdict['j'] = "000001000000011000000011000000011000000011000000011000000011000000011000000011000000111000001110000";
    cdict['k'] = "011001111111000110011000110011001100011011000011110000011110000011011000011001100111000110110000011";
    cdict['l'] = "001100000011100000001100000001100000001100000001100000001100000001100000001100000001100000001111110";
    cdict['m'] = "010000001111000011011100111011111111011011011011000011011000011011000011011000011111000011110000001";
    cdict['n'] = "011000011111100011011110011011011011011001111011000111011000011011000011011000011011000011010000010";
    cdict['o'] = "001111100000111110010000011110000011110000011110000011110000011110000011010000011001000110000111100";
    cdict['p'] = "001111100011111110111000111011000011011000011011000110011011100011000000011000000011000000011000000";
    cdict['q'] = "001111100000111110010000011110000011110000011110000011110000011110001011010001111001000110000111011";
    cdict['r'] = "001111100011111110111000111011000011011000011011000110011011100011011000011001100011000110011000011";
    cdict['s'] = "000111110001000011010000000011111000001111100000001110000000111110000011011000111001111110000111100";
    cdict['t'] = "111111111111111110000110000000110000000110000000110000000110000000110000000110000000110000000100000";
    cdict['u'] = "011000010111000111111000110011000110011000110011000110011000110011000110011000110001111100000111000";
    cdict['v'] = "010000011110000011010000011011000110011000110011000110001100110001101110001101100000111100000111000";
    cdict['w'] = "010000001110000001110000001010000001010001001010011001010111001010111001010111011011101110011000100";
    cdict['x'] = "010000001110000011111000110011101100001111000000111000001111100011101110111000111110000011100000010";
    cdict['y'] = "010000001111000011011100110001111100000111100000011000000011000000011000000011000000011000000010000";
    cdict['z'] = "011111110000000110000001100000011000000110000001100000011000000110000000100000000111111111011111110";
}

void bufferChar(FrameBuffer* fb, char c, int char_width, int char_height, int x, int y, int scale, int r, int g, int b, int a) {
    int i, j;
    int scale_x_offset, scale_y_offset;
    char* dict = cdict[(int) c];
    for (i = 0; i < char_height; i++) {
        for (j = 0; j < char_width; j++) {
            if(dict[i+(j*char_width)] == '1') {
                addPixelToBuffer(fb, (x)+i, (y)+j, r, g, b, a);
            }
        }
    }
}

void bufferString(FrameBuffer* fb, char* s, int char_width, int char_height, int x, int y, int spacing, int scale, int r, int g, int b, int a) {
    int char_index = 0;
    int string_length = strlen(s);
    char c;
    int char_x = x;
    int char_y = y;
    for (char_index = 0; char_index < string_length; char_index++) {
        memcpy(&c, &s[char_index], 1);
        bufferChar(fb, c, char_width, char_height, char_x, char_y, scale, r, g, b, a);
        char_x += char_width + spacing;
        if (char_x > fb->screen_width - char_width) {
            char_y += char_height + 10;
        }
    }
}

void alignString(FrameBuffer* fb, char* c, int char_width, int char_height, int alignment, int y, int spacing, int scale, int r, int g, int b, int a) {
    /**
     * alignment
     * 1 = left
     * 2 = center
     * 3 = right
     * 4 = justified
     */ 

}